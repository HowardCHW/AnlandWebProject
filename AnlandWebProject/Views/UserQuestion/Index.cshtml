
@{
    ViewBag.Title = "基隆市安樂地政事務所全球資訊網 - 常見問題";
    Layout = "~/Views/Shared/_LayoutContent.cshtml";
}

@section AdditionalMeta
{
    <link rel="govtwsimpledc.xsd" href="http://www.gov.tw/schema/dc/" title="Dublin Core">
    <meta name="DC.Title" content="基隆市安樂地政事務所全球資訊網 - 常見問題">
    <meta name="DC.Creator" content="基隆市安樂地政事務所登記課">
    <meta name="DC.Subject" content="常見問題總覽頁">
    <meta name="DC.Description" content="常見問題">
    <meta name="DC.Contributor" content="基隆市安樂地政事務所">
    <meta name="DC.Type" content="文字">
    <meta name="DC.Format" content="text/html">
    <meta name="DC.Source" content="基隆市安樂地政事務所">
    <meta name="DC.Language" content="中文">
    <meta name="DC.Coverage.t.max" content="2015-04-26">
    <meta name="DC.Coverage.t.min" content="2010-04-26">
    <meta name="DC.Publisher" content="基隆市安樂地政事務所">
    <meta name="DC.Date" content="2010-04-26 10:00 ">
    <meta name="DC.Identifier" content="376570600A">
    <meta name="DC.Relation" content="http://anleh-land.gov.tw/">
    <meta name="DC.Rights" content="基隆市安樂地政事務所">
    <meta name="Category.Theme" content="140">
    <meta name="Category.Cake" content="J40">
    <meta name="Category.Service" content="I6Z">
    <meta name="Keywords" content="問答, 地政, 測量, 登記, 地用, 資訊, 地價, 其他">
}

<!-- 公告區 -->
<div class="container d-print-none">
    <div class="pl-3">
        <a accesskey="C" href="#content" id="content" title="中央內容區塊">:::</a>
        <span class="sr-only">|</span>
        <a class="sr-only sr-only-focusable" href="#footer">轉跳至下方功能區</a>
    </div>
    <div class="row justify-content-between align-items-center">
        <!-- 麵包屑麵包屑 -->
        <div class="col-lg-6">
            <nav aria-label="breadcrumb">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item pathTitle">現在位置</li>
                    <li class="breadcrumb-item">
                        <a href="@Url.Action("Index","Home")">首頁</a>
                    </li>
                    <li class="breadcrumb-item active" aria-current="page">常見問題</li>
                </ol>
            </nav>
        </div>
        <div class="col-lg-6 d-flex justify-content-end align-items-center">
            <div class="btn-toolbar justify-content-between" role="toolbar" aria-label="Toolbar with button groups">
                <a class="btn btn-fb btn-sm" role="button" role="button" title="網站分享至facebook(另開視窗)" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=http://anleh-land.gov.tw/">
                    <span class="fab fa-facebook-square"></span>
                </a>
                <a class="btn btn-print btn-sm" role="button" title="列印(另開視窗)" target="_blank" href="javascript:print()">
                    <span class="far fa-print"></span>
                </a>
                <span class="fontSizeSet">字級設定：</span>
                <div class="btn-group fontSizeSetGroup btn-group-toggle mr-3" data-toggle="buttons">
                    <label class="btn btn-outline-secondary btn-sm font-small" for="option1">
                        <span class="sr-only">小字型</span>
                        <input type="radio" name="小字型" title="小字型" id="option1" autocomplete="off"> 小
                    </label>
                    <label class="btn btn-outline-secondary btn-sm font-default active" for="option2">
                        <span class="sr-only">中字型</span>
                        <input type="radio" name="中字型" title="中字型" id="option2" autocomplete="off" checked> 中
                    </label>
                    <label class="btn btn-outline-secondary btn-sm font-large" for="option3">
                        <span class="sr-only">大字型</span>
                        <input type="radio" name="大字型" title="大字型" id="option3" autocomplete="off"> 大
                    </label>
                </div>
            </div>
        </div>
        <!-- /麵包屑 -->
    </div>
</div>
<!-- 內文區 -->
<div class="container">
    <div class="row">
        <div class="card ml-3 mr-3 mt-3 subContent">
            <div class="card-body">
                <div class="markTag"></div>
                <form class="form-inline justify-content-end">
                    <div class="form-group selectItem">
                        <label for="questionSelectItem">選擇瀏覽項目：</label>
                        @Html.DropDownList("Classfy", null, "全部", new { @class = "form-control", @id = "classfy" })
                    </div>
                </form>
                <div class="pl-5 pr-0">
                    <h2 class="pl-0" id="h2Title">常見問題 - 全部</h2>
                    <table id="questiontable" class="table table-hover border-bottom rwd-table" summary="常見問題列表，為二直欄設計，第一直欄為類別，第二直欄為標題。">
                        <caption class="sr-only">
                            常見問題列表
                        </caption>
                        <thead>
                            <tr class="bg-brown">
                                <th scope="col" style="width:10%;">類別ID</th>
                                <th scope="col" style="width:10%;">類別</th>
                                <th scope="col">標題</th>
                            </tr>
                        </thead>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- /內文區 -->

@section scripts{
    <script>
        var urlQueryQuestion = '@Url.Action("QaQuery", "UserQuestion")';
        var qatable;
        $(document).ready(function () {
            DatatableBinding('');

            $('#classfy').on('change', function () {
                var selectedItem = $(this).find("option:selected").text();                
                $('#h2Title').text('常見問題 - ' + selectedItem);
                //篩選條件選好後重新畫一次Table
                qatable.draw();
            });
        });

        //Datatable 的條件篩選做法
        $.fn.dataTable.ext.search.push(
            function (settings, data, dataIndex) {
                var selectedVal = $('#classfy').val();
                var classfy = data[0];
                if (selectedVal != '') {
                    if (selectedVal == classfy) {
                        return true;
                    }
                    return false;
                }
                return true;
            }
        );

        function DatatableBinding() {
            qatable = $('#questiontable').DataTable({
                ajax: {
                    "url": urlQueryQuestion,
                    "type": 'POST'
                },
                language: {
                    "processing": "處理中...",
                    "loadingRecords": "載入中...",
                    "lengthMenu": "顯示 _MENU_ 筆結果",
                    "zeroRecords": "沒有符合的結果",
                    "info": "顯示第 _START_ 至 _END_ 筆結果，共 _TOTAL_ 筆",
                    "infoEmpty": "顯示第 0 至 0 筆結果，共 0 筆",
                    "infoFiltered": "(從 _MAX_ 筆結果中過濾)",
                    "infoPostFix": "",
                    "search": "搜尋:",
                    "searchPlaceholder": "請輸入關鍵字",
                    "paginate": {
                        "first": "第一頁",
                        "previous": "上一頁",
                        "next": "下一頁",
                        "last": "最後一頁"
                    },
                    "aria": {
                        "sortAscending": ": 升冪排列",
                        "sortDescending": ": 降冪排列"
                    }
                },
                pagingType: "full_numbers",
                ordering: false,
                columnDefs: [
                    {
                        "targets": [0],
                        "visible": false
                    }
                ],
                columns: [
                    { mDataProp: "Classfy" },                    
                    { mDataProp: "ClassfyName" },
                    {
                        mDataProp: "Subject",
                        render: function (data, type, full, meta) {
                            return '<a href="../UserQuestion/QuestionDetail/' + full.ID + '">' + data + '</a>'
                        }
                    }
                ]
            });
        }
    </script>
}